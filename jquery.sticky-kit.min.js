/*
 Sticky-kit v1.1.1 | WTFPL | Leaf Corcoran 2014 | http://leafo.net
*/
(function(){var $,top,win;$=this.jQuery||window.jQuery;win=$(window);top=function(element,context){if(context===document){if(element===document){return 0}else if(element===win){return win.scrollTop()}else{return element.offset().top}}else{return top(element,document)-top(context,document)}};$.fn.stick_in_parent=function(opts){var elm,enable_bottoming,offset_top,parent_selector,scrollable_selector,sticky_class,_fn,_i,_len;if(opts==null){opts={}}sticky_class=opts.sticky_class,parent_selector=opts.parent,scrollable_selector=opts.scrollable,offset_top=opts.offset_top,enable_bottoming=opts.bottoming;if(offset_top==null){offset_top=0}if(parent_selector==null){parent_selector=void 0}if(sticky_class==null){sticky_class="is_stuck"}if(enable_bottoming==null){enable_bottoming=true}_fn=function(elm,detached,fixed,bottomed){var detach,parent,scrollable,tick,_top;if(elm.data("sticky_kit")){return}elm.data("sticky_kit",true);scrollable=win;if(scrollable_selector!=null){scrollable=elm.parent().closest(scrollable_selector)}if(!scrollable.length){throw"failed to find stick scrollable"}parent=elm.parent();if(parent_selector!=null){parent=parent.closest(parent_selector)}if(!parent.length){throw"failed to find stick parent"}_top=0;elm.css("position","relative");tick=function(){var border_bottom,bottomed_old,fixed_old,margin_top,old,original_top,padding_bottom;if(detached){return}fixed_old=fixed;bottomed_old=bottomed;padding_bottom=parseInt(parent.css("padding-bottom"),10);border_bottom=parseInt(parent.css("border-bottom-width"),10);margin_top=parseInt(elm.css("margin-top"),10);original_top=top(elm,parent)-_top;_top=top(scrollable,parent)+offset_top+margin_top-original_top;if(enable_bottoming){old=_top;_top=Math.min(_top,parent.outerHeight()-original_top-elm.outerHeight(true)+margin_top-padding_bottom-border_bottom);bottomed=_top!==old}_top=Math.max(_top,0);fixed=_top!==0;if(fixed){elm.addClass(sticky_class)}else{elm.removeClass(sticky_class)}elm.css("top",_top);if(!fixed&&fixed_old){elm.trigger("sticky_kit:unstick")}if(!bottomed&&bottomed_old){elm.trigger("sticky_kit:unbottom")}if(fixed&&!fixed_old){return elm.trigger("sticky_kit:stick")}else if(bottomed&&!bottomed_old){return elm.trigger("sticky_kit:bottom")}};detach=function(){detached=true;win.off("touchmove",tick);win.off("scroll",tick);win.off("resize",tick);if(scrollable_selector){scrollable.off("touchmove",tick);scrollable.off("scroll",tick);elm.parentsUntil(scrollable).off("touchmove",tick);elm.parentsUntil(scrollable).off("scroll",tick)}$(document.body).off("sticky_kit:recalc",tick);elm.off("sticky_kit:detach",detach);elm.removeData("sticky_kit");elm.css({position:"",bottom:"",top:""});parent.css("position","");if(fixed){return elm.removeClass(sticky_class)}};parent.css("position","relative");win.on("touchmove",tick);win.on("scroll",tick);win.on("resize",tick);if(scrollable_selector){scrollable.on("touchmove",tick);scrollable.on("scroll",tick);elm.parentsUntil(scrollable).on("touchmove",tick);elm.parentsUntil(scrollable).on("scroll",tick)}$(document.body).on("sticky_kit:recalc",tick);elm.on("sticky_kit:detach",detach);return setTimeout(tick,0)};for(_i=0,_len=this.length;_i<_len;_i++){elm=this[_i];_fn($(elm))}return this}}).call(this);
